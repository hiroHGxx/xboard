<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XBoard ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .metric {
            background: #f5f5f5;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #007acc;
        }
        .good { border-left-color: #28a745; }
        .warning { border-left-color: #ffc107; }
        .error { border-left-color: #dc3545; }
        .score {
            font-size: 24px;
            font-weight: bold;
            display: inline-block;
            margin-right: 10px;
        }
        button {
            background: #007acc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #005a9a;
        }
        .results {
            margin-top: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <h1>ğŸš€ XBoard ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æãƒ„ãƒ¼ãƒ«</h1>
    
    <div class="metric">
        <h2>ğŸ“Š è¦ä»¶ãƒã‚§ãƒƒã‚¯</h2>
        <p><strong>ç›®æ¨™:</strong> Lighthouse Performance, Accessibility, Best Practices, SEO â‰¥ 90ç‚¹</p>
        <p><strong>ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºç›®æ¨™:</strong> åˆå›JSãƒãƒ³ãƒ‰ãƒ« < 100KB</p>
        <p><strong>LCPç›®æ¨™:</strong> < 2.5ç§’ (ãƒ¢ãƒã‚¤ãƒ«4G)</p>
    </div>

    <div class="metric">
        <h2>ğŸ“¦ ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºåˆ†æ</h2>
        <div id="bundle-analysis">
            <h3>ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º:</h3>
            <ul>
                <li><strong>xboard-embed.js:</strong> 7.42 KB (gzip: 2.67 KB) âœ…</li>
                <li><strong>main-*.js:</strong> 185.56 KB (gzip: 58.60 KB) âš ï¸</li>
                <li><strong>index-*.css:</strong> 10.50 KB (gzip: 2.79 KB) âœ…</li>
            </ul>
            <p><strong>è©•ä¾¡:</strong> åŸ‹ã‚è¾¼ã¿ç”¨ã¯è»½é‡ã€ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã¯è¦æœ€é©åŒ–</p>
        </div>
    </div>

    <div class="metric">
        <h2>âš¡ Web Vitals æ¸¬å®š</h2>
        <button onclick="measureWebVitals()">Web Vitalsæ¸¬å®šé–‹å§‹</button>
        <div id="web-vitals-results"></div>
    </div>

    <div class="metric">
        <h2>ğŸ” ãƒªã‚½ãƒ¼ã‚¹åˆ†æ</h2>
        <button onclick="analyzeResources()">ãƒªã‚½ãƒ¼ã‚¹åˆ†æé–‹å§‹</button>
        <div id="resource-analysis"></div>
    </div>

    <div class="metric">
        <h2>ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="testResponsive()">ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆ</button>
        <div id="responsive-results"></div>
    </div>

    <div class="metric">
        <h2>â™¿ ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯</h2>
        <button onclick="checkAccessibility()">ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ç¢ºèª</button>
        <div id="accessibility-results"></div>
    </div>

    <div class="results" id="overall-results"></div>

    <script>
        // Web Vitals æ¸¬å®š
        async function measureWebVitals() {
            const results = document.getElementById('web-vitals-results');
            results.innerHTML = '<p>æ¸¬å®šä¸­...</p>';
            
            const vitals = {};
            
            // LCP (Largest Contentful Paint)
            const lcpObserver = new PerformanceObserver((entryList) => {
                const entries = entryList.getEntries();
                const lastEntry = entries[entries.length - 1];
                vitals.LCP = lastEntry.startTime;
                updateWebVitals(vitals);
            });
            lcpObserver.observe({entryTypes: ['largest-contentful-paint']});
            
            // FID (First Input Delay) - simulated
            vitals.FID = 'N/A (interaction required)';
            
            // CLS (Cumulative Layout Shift)
            const clsObserver = new PerformanceObserver((entryList) => {
                let clsValue = 0;
                for (const entry of entryList.getEntries()) {
                    if (!entry.hadRecentInput) {
                        clsValue += entry.value;
                    }
                }
                vitals.CLS = clsValue;
                updateWebVitals(vitals);
            });
            clsObserver.observe({entryTypes: ['layout-shift']});
            
            // FCP (First Contentful Paint)
            const fcpObserver = new PerformanceObserver((entryList) => {
                for (const entry of entryList.getEntries()) {
                    if (entry.name === 'first-contentful-paint') {
                        vitals.FCP = entry.startTime;
                        updateWebVitals(vitals);
                    }
                }
            });
            fcpObserver.observe({entryTypes: ['paint']});
            
            setTimeout(() => updateWebVitals(vitals), 3000);
        }
        
        function updateWebVitals(vitals) {
            const results = document.getElementById('web-vitals-results');
            let html = '<table><tr><th>æŒ‡æ¨™</th><th>å€¤</th><th>è©•ä¾¡</th><th>ç›®æ¨™</th></tr>';
            
            if (vitals.LCP) {
                const lcpSeconds = (vitals.LCP / 1000).toFixed(2);
                const lcpGood = vitals.LCP < 2500;
                html += `<tr><td>LCP</td><td>${lcpSeconds}s</td><td>${lcpGood ? 'âœ… Good' : 'âš ï¸ Needs improvement'}</td><td>&lt; 2.5s</td></tr>`;
            }
            
            if (vitals.FCP) {
                const fcpSeconds = (vitals.FCP / 1000).toFixed(2);
                const fcpGood = vitals.FCP < 1800;
                html += `<tr><td>FCP</td><td>${fcpSeconds}s</td><td>${fcpGood ? 'âœ… Good' : 'âš ï¸ Needs improvement'}</td><td>&lt; 1.8s</td></tr>`;
            }
            
            if (vitals.CLS !== undefined) {
                const clsGood = vitals.CLS < 0.1;
                html += `<tr><td>CLS</td><td>${vitals.CLS.toFixed(3)}</td><td>${clsGood ? 'âœ… Good' : 'âš ï¸ Needs improvement'}</td><td>&lt; 0.1</td></tr>`;
            }
            
            html += '</table>';
            results.innerHTML = html;
        }
        
        // ãƒªã‚½ãƒ¼ã‚¹åˆ†æ
        function analyzeResources() {
            const results = document.getElementById('resource-analysis');
            const resources = performance.getEntriesByType('resource');
            
            let totalSize = 0;
            let jsSize = 0;
            let cssSize = 0;
            let imageSize = 0;
            
            let html = '<h3>èª­ã¿è¾¼ã¾ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹:</h3><table><tr><th>ã‚¿ã‚¤ãƒ—</th><th>URL</th><th>ã‚µã‚¤ã‚º(æ¨å®š)</th><th>æ™‚é–“</th></tr>';
            
            resources.forEach(resource => {
                const size = resource.transferSize || resource.encodedBodySize || 0;
                totalSize += size;
                
                let type = 'Other';
                if (resource.name.includes('.js')) {
                    type = 'JavaScript';
                    jsSize += size;
                } else if (resource.name.includes('.css')) {
                    type = 'CSS';
                    cssSize += size;
                } else if (resource.name.match(/\.(jpg|jpeg|png|gif|webp|svg)$/i)) {
                    type = 'Image';
                    imageSize += size;
                }
                
                const fileName = resource.name.split('/').pop();
                const duration = (resource.responseEnd - resource.startTime).toFixed(0);
                
                html += `<tr><td>${type}</td><td>${fileName}</td><td>${(size/1024).toFixed(1)} KB</td><td>${duration}ms</td></tr>`;
            });
            
            html += '</table>';
            html += `<h3>ã‚µãƒãƒªãƒ¼:</h3>`;
            html += `<ul>`;
            html += `<li>ç·ã‚µã‚¤ã‚º: ${(totalSize/1024).toFixed(1)} KB</li>`;
            html += `<li>JavaScript: ${(jsSize/1024).toFixed(1)} KB</li>`;
            html += `<li>CSS: ${(cssSize/1024).toFixed(1)} KB</li>`;
            html += `<li>ç”»åƒ: ${(imageSize/1024).toFixed(1)} KB</li>`;
            html += `</ul>`;
            
            // è©•ä¾¡
            if (jsSize < 102400) { // 100KB
                html += `<p>âœ… JavaScript ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã¯ç›®æ¨™ã‚’é”æˆ</p>`;
            } else {
                html += `<p>âš ï¸ JavaScript ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºãŒç›®æ¨™ã‚’è¶…é (ç›®æ¨™: 100KB)</p>`;
            }
            
            results.innerHTML = html;
        }
        
        // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆ
        function testResponsive() {
            const results = document.getElementById('responsive-results');
            const viewports = [
                { name: 'Mobile', width: 375, height: 667 },
                { name: 'Tablet', width: 768, height: 1024 },
                { name: 'Desktop', width: 1200, height: 800 }
            ];
            
            let html = '<h3>ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç¢ºèª:</h3>';
            
            viewports.forEach(viewport => {
                // ç°¡æ˜“çš„ãªãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒã‚§ãƒƒã‚¯
                const mediaQuery = window.matchMedia(`(max-width: ${viewport.width}px)`);
                const matches = mediaQuery.matches;
                
                html += `<p><strong>${viewport.name} (${viewport.width}x${viewport.height}):</strong> `;
                html += matches ? 'âœ… å¯¾å¿œ' : 'âŒ è¦ç¢ºèª';
                html += '</p>';
            });
            
            // ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ç¢ºèª
            const gridElements = document.querySelectorAll('.grid');
            if (gridElements.length > 0) {
                html += '<p>âœ… CSS Grid ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ¤œå‡º</p>';
            }
            
            results.innerHTML = html;
        }
        
        // ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯
        function checkAccessibility() {
            const results = document.getElementById('accessibility-results');
            let score = 100;
            let issues = [];
            
            // åŸºæœ¬çš„ãªã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                if (!img.alt) {
                    issues.push('ç”»åƒã«altå±æ€§ãŒã‚ã‚Šã¾ã›ã‚“');
                    score -= 5;
                }
            });
            
            const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
            if (headings.length === 0) {
                issues.push('è¦‹å‡ºã—ã‚¿ã‚°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                score -= 10;
            }
            
            const focusableElements = document.querySelectorAll('button, input, select, textarea, a[href]');
            let focusableCount = 0;
            focusableElements.forEach(el => {
                if (el.tabIndex !== -1) focusableCount++;
            });
            
            if (focusableCount === 0) {
                issues.push('ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½ãªè¦ç´ ãŒã‚ã‚Šã¾ã›ã‚“');
                score -= 10;
            }
            
            // ã‚«ãƒ©ãƒ¼ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã®ç°¡æ˜“ãƒã‚§ãƒƒã‚¯
            const textElements = document.querySelectorAll('p, span, div, h1, h2, h3, h4, h5, h6');
            // å®Ÿéš›ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆè¨ˆç®—ã¯è¤‡é›‘ãªã®ã§ç°¡æ˜“ç‰ˆ
            
            let html = `<h3>ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚¹ã‚³ã‚¢: ${Math.max(score, 0)}/100</h3>`;
            
            if (issues.length === 0) {
                html += '<p>âœ… åŸºæœ¬çš„ãªã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã¾ã™</p>';
            } else {
                html += '<h4>æ”¹å–„ãŒå¿…è¦ãªé …ç›®:</h4><ul>';
                issues.forEach(issue => {
                    html += `<li>âš ï¸ ${issue}</li>`;
                });
                html += '</ul>';
            }
            
            results.innerHTML = html;
        }
        
        // ç·åˆè©•ä¾¡
        function updateOverallResults() {
            const results = document.getElementById('overall-results');
            
            let html = '<h2>ğŸ“‹ ç·åˆè©•ä¾¡</h2>';
            html += '<div class="metric good">';
            html += '<h3>âœ… é”æˆæ¸ˆã¿é …ç›®</h3>';
            html += '<ul>';
            html += '<li>åŸ‹ã‚è¾¼ã¿ç”¨JSãƒãƒ³ãƒ‰ãƒ«: 7.42KB (ç›®æ¨™: 100KBæœªæº€)</li>';
            html += '<li>ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¯¾å¿œ</li>';
            html += '<li>ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ</li>';
            html += '<li>è‡ªå‹•ãƒªã‚µã‚¤ã‚ºæ©Ÿèƒ½</li>';
            html += '<li>TypeScriptå‹å®‰å…¨æ€§</li>';
            html += '</ul>';
            html += '</div>';
            
            html += '<div class="metric warning">';
            html += '<h3>âš ï¸ è¦æ”¹å–„é …ç›®</h3>';
            html += '<ul>';
            html += '<li>ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªJSãƒãƒ³ãƒ‰ãƒ«: 185KB (è¦æœ€é©åŒ–)</li>';
            html += '<li>Lighthouseè‡ªå‹•ãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹ç¯‰</li>';
            html += '<li>å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆå®Ÿæ–½</li>';
            html += '</ul>';
            html += '</div>';
            
            html += '<div class="metric">';
            html += '<h3>ğŸ¯ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>';
            html += '<ul>';
            html += '<li>ã‚³ãƒ¼ãƒ‰åˆ†å‰²ã«ã‚ˆã‚‹ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºæœ€é©åŒ–</li>';
            html += '<li>æœ¬ç•ªç’°å¢ƒã§ã®Lighthouseæ¸¬å®š</li>';
            html += '<li>å®Ÿæ©Ÿã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</li>';
            html += '</ul>';
            html += '</div>';
            
            results.innerHTML = html;
        }
        
        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            updateOverallResults();
        });
    </script>
</body>
</html>